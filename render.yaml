# Render.com Deployment Blueprint
# ================================
# This file defines the infrastructure for deploying AI Sprint Companion
# to Render.com's free tier.
#
# To deploy:
# 1. Push this repository to GitHub
# 2. Go to https://dashboard.render.com/
# 3. Click "New" -> "Blueprint"
# 4. Connect your GitHub repository
# 5. Render will automatically detect this render.yaml file
#
# Documentation: https://render.com/docs/blueprint-spec

services:
  # Main Web Service - AI Sprint Companion Backend
  - type: web
    name: ai-sprint-companion
    runtime: docker
    region: oregon  # Free tier available in oregon
    plan: free      # Free tier plan

    # Docker configuration
    dockerfilePath: ./backend/Dockerfile
    dockerContext: ./backend

    # Environment variables
    envVars:
      # Application configuration
      - key: AI_PROVIDER
        value: mock  # Use 'openai' or 'azure' for production with real AI

      # OpenAI Configuration (set these in Render dashboard for security)
      - key: OPENAI_API_KEY
        sync: false  # Must be set manually in dashboard
      - key: OPENAI_MODEL
        value: gpt-4o-mini

      # Azure OpenAI Configuration (optional, set in dashboard if using Azure)
      - key: AZURE_OPENAI_ENDPOINT
        sync: false
      - key: AZURE_OPENAI_KEY
        sync: false
      - key: AZURE_OPENAI_DEPLOYMENT
        value: gpt-4o-mini

    # Health check configuration
    healthCheckPath: /health

    # Auto-deploy on push to main branch
    autoDeploy: true
